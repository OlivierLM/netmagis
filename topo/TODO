
topod
    - passer les spools dans la base dns
    - gérer les spools (nettoyage des vieilleries, etc.)
    - améliorer la détection des erreurs sur les équipements
    - détecter les modifications sur les équipements (sessions radius / base dns)
    - appeler rancid sur les équipements modifiés
    - construire le graphe de manière optimisée
    - distribuer le graphe

Interface web de configuration des ports des switches
    composée des champs suivants :
	Description [texte]
	Vlan Access [listbox à sélection unique] (liste = intersection des
	    vlans arrivant sur ce commutateur avec les vlans autorisés
	    pour le correspondant)
	Vlan VoIP [listbox à sélection unique] (liste = idem liste précédente
	    intersectée avec les vlans marqués comme VoIP)
	=> pour désactiver, les deux listboxes ont l'item "Aucun Vlan"

Modifications dans le graphe :
    - mettre les noms FQDN complets dans le graphe
	=> retirer les domaines dans les affichages de l'interface
	    Web)
    - distribuer le graphe

www/bin/eq

    Lien "Trafic" d'un bâtiment
	Trafic cumulé des AP par SSID 
	http://idris/bin/gengraph?
		&id1=Minsa-ap1.osiris+Minsa-ap2.osiris+....
		[&legende1=a]
		&id2=Minsa-ap2.osiris-sec+Minsa-ap2.osiris-sec+...
		[&legende2=b]
		&debut=...&fin=

    Lien "Assoc" d'un AP
	Nb d'associations actuelles par SSID (osiris, osiris-lab,
	    osiris-sec, eduroam, osiris-non-auth)
	http://idris/bin/gengraph?
		&id1=Minsa-ap1.osiris+Minsa-ap2.osiris+....
		&id2=Minsa-ap2.osiris-sec+Minsa-ap2.osiris-sec+...
		&debut=...&fin=

    Lien "Assoc" d'un bâtiment
	Nb total d'associations actuelles par SSID

    Lien _xxx-ap1
	Pointe vers www/bin/eq?id=xxx-ap1

    Résumé : specification de http://idris/bin/gengraph
	paramètres :
	    idX = <ptmetro> [+ <ptmetro> [+ <ptmetro> ...]]
	    [ legendeX = <legende> ]
		=> si pas indiquée : légende par défaut déterminée par idris
	    [ taille = <petit|moyen|grand> ]
		=> si pas indiquée : moyen
	    debut = <date en format time_t>
	    fin = <date en format time_t>



www/bin/eq
    (en global, ou par i/f radio)
	=> nb d'associations + liens vers sondes de trafic

TODO topo
- rendre clickables les no de liens et afficher les Vlans transportés
- faire une page de description d'un lien Lxx
- injecter le nom du vlan dans la desc des i/f des switches
- trouver les vlans non utilisés
- dresser l'état dynamique de tous les liens


Gestion des noms de vlans et suppression de VTP

    - exploitation :
	sur tous les -cc et les -ci, on déclare :
	    vlan 1-4095
	pour pré-instancier tous les vlans et ne plus se poser le problème
	de la continuité de l'instanciation sur le chemin entre un -ce
	et le -rc

    - exploitation :
	crc-cc1 contient tous les noms des vlans : c'est le commutateur
	de référence.

    - ajout de lignes "lvlan" dans le graphe :
	
	lvlan <eq> <id> desc <desc> declared <yes/no> incoming <yes/no>

	    => "declared" : déclaré dans la conf (i.e. vlan instancié
		sur l'équipement)
	    => "incoming" : vlan arrivant sur l'équipement via un
		lien trunk par exemple

	Combinaisons possibles

	decl.	incom. signification
	no	no	ok : vlan non présent
	no	yes	sur un -ce : allow trop large sur le -cc correspondant
			sur un -cc : pas possible
			=> dans tous les cas : erreur
	yes	no	sur un -ce : sans doute un reste de vieux vlan
			sur un -cc : normal
	yes	yes	ok : vlan transporté

Scripts à écrire

    instancier-vlan <eq> <id>
	modification de la conf de l'équipement pour instancier le vlan
	    et positionner la description en fct du graphe de topo

    creer-vlan <id> <desc>
	modification de la conf de crc-cc1 pour mettre le nom du vlan

    supprimer-vlan <id>
	modification de la conf de crc-cc1 pour supprimer le nom du vlan

    vlan-libre [<id> ... <id>]
	donne tous les vlans qui ont une description et pas de port
	    access dans le graphe. Si un id est donné en argument,
	    indique si le vlan correspondant est libre.

------------------------------------------------------------------------------
Fait
    - gestion des interfaces "disable"
	la description est systématiquement "X"

    ajouter les vlans spécifiques VoIP
	Colonne supplémentaire "Voice" dans la liste des vlans (fichier csv)
	modifier buildgraph 
    analyser voice vlan sur cisco et HP
	Ne pas générer d'erreur en cas d'incohérence (vlan "voice"
	et pas de mot-clef "voice" ou inversement) pour HP et cisco
