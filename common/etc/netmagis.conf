#
# Standard netmagis.conf file
#

##############################################################################
# Common modules
##############################################################################

dnsdbhost	dbcrc.u-strasbg.fr
dnsdbport	5432
dnsdbname	netmagis
dnsdbuser	dns
dnsdbpassword	password-of-dnsdbuser

macdbhost	dbcrc.u-strasbg.fr
macdbport	5432
macdbname	mac
macdbuser	dns
macdbpassword	password-of-macdbuser

pkgtcl		/usr/local/lib/netmagis/pkgtcl

msgsdir		/usr/local/lib/netmagis/msgs

# just display my login name
whoami		"id -u -n"

debug		no
cache		no
cachedir	/var/netmagis/cache

# list of users who can bypass the nologin test, separated by one space
# and who can administer database
rootusers	"pda jean"

##############################################################################
# Database maintenance
##############################################################################

dumpdir		/var/netmagis/dbdump
dbcopy		netmagis-sandbox

##############################################################################
# Server scripts (BIND, ISC-DHCPD, Sendmail/Postfix)
##############################################################################

# diff command for verbose output
diff		"diff --unified=0 %s -"

########################################
# mkzone
########################################

# where BIND daemon expects to find zone files
zonedir		"/etc/namedb/master"

# tell BIND to reload files
zonecmd		"rndc reload"

########################################
# mkmroute
########################################

# where sendmail expects to find mail route file
mroutefile	/etc/mail/mroute

# static prologue for the mail routing file
mrouteprologue	/etc/mail/mroute.prologue

# format of lines in mail route file, adapted to sendmail
#   %1$s: mail domain
#   %2$s: mail host
mroutefmt	"%1$-40s smtp.[%2$s]"

# shell command to post-process file if a modification is done
# You can include a command to propagate generated file to other
# mail routers if you have more than one
mroutecmd	"cd /etc/mail ; /usr/sbin/makemap -N hash mroute < mroute"

########################################
# mkdhcp
########################################

# where dhcpd expects to find generated config file (pointed to by dhcpd.conf)
dhcpfile	/etc/dhcp-gen.conf

# command to test dhcpd configuration file
dhcptest	"/usr/local/sbin/dhcpd -t -cf /etc/dhcpd.conf"

# command to restart dhcpd
dhcpcmd		"sh /usr/local/etc/rc.d/isc-dhcpd.sh restart"

##############################################################################
# Web module
##############################################################################

templatedir	/usr/local/lib/netmagis/tmpl

nologinfile	/usr/local/etc/netmagis.nologin

# empty string (internal auth) or external URL to change password
#passwdurl	https://www.mycompany.com/chpasswd?uid=%s
passwdurl	""			# internal

neato		/usr/local/bin/neato
dot		/usr/local/bin/dot
ps2pdf		/usr/local/lib/netmagis/ps2pdf
hostcmd		/usr/bin/host

# if internal authentication
pwgen		/usr/local/bin/pwgen --num-passwords=1 --numerals 12
crypt		openssl passwd -1 %s


# empty string = localhost
topohost	""
topouser	""

# topo* keys are used also by the web and the topo modules
topobindir	/usr/local/lib/netmagis/topo
topograph	/var/netmagis/network.graph

metrohost	metro.mycompany.com

##############################################################################
# Topo module (on topohost machine)
##############################################################################

rancidcmd	/usr/local/libexec/rancid/rancid-run
ranciddb	/usr/local/var/rancid/router.db
rancidconfdir	/usr/local/var/rancid/configs

# how to send commands on equipments
# -u user on equipment (modconf here)
# -p passwd on equipment
sendcisco	/usr/local/libexec/rancid/clogin -autoenable -u modconf -p password
sendhp		/usr/local/libexec/rancid/hlogin -autoenable -u modconf -p password
sendjuniper	/usr/local/libexec/rancid/jlogin -u modconf -p password

fpingcmd	/usr/local/sbin/fping %s

# takes a message on stdin and write it in the syslog
logger		/usr/bin/logger -i -p local0.err -t topod

eqvirtdir	/usr/local/var/netmagis/eqvirt
eqgendir	/var/netmagis/eqgen

# check if router interfaces are declared in the DNS (yes/no)
checkrouterif	no		# not yet ready
# apply local policy to get ssid sensors (yes/no)
ssidsensors	yes
